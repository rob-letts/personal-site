@layer theme, reset, default, component, utility, animation;

@font-face {
  font-family: DMMono;
  src: url("/DMMono-Regular.woff2") format("woff2");
}

@layer theme {
  :root {
    --background-color: rgb(255 192 203 / 100%);
    --text-color: rgb(0 0 0 / 90%);
    --primary-color: rgb(140 31 98);
    --secondary-color: rgb(123 84 129);
    --brand-gradient: linear-gradient(to right, var(--primary-color), var(--secondary-color));
    --filter-invert: 1;
    --display-light-icon: block;
    --display-dark-icon: none;
    --step-0: clamp(0.75rem, calc(0.53rem + 1vw), 1.5rem);
    --step-1: clamp(0.94rem, calc(0.63rem + 1.42vw), 2rem);
    --step-2: clamp(1.17rem, calc(0.74rem + 1.99vw), 2.67rem);
    --step-3: clamp(1.47rem, calc(0.86rem + 2.78vw), 3.55rem);
    --step-4: clamp(1.83rem, calc(0.98rem + 3.87vw), 4.74rem);
    --transition-speed: 0.2s;
    --transition-speed-slow: calc(var(--transition-speed) * 2);
    --transition-timing: ease-out;
  }

  :root.dark-mode {
    --background-color: rgb(0 0 0 / 90%);
    --text-color: rgb(255 192 203 / 100%);
    --primary-color: rgb(123 84 129);
    --secondary-color: rgb(140 31 98);
    --filter-invert: 0;
    --display-light-icon: none;
    --display-dark-icon: block;
  }
}

@layer reset {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  * {
    padding: 0;
    margin: 0;
  }

  ::selection {
    background: var(--text-color);
    color: var(--background-color);
  }

  html {
    height: 100dvh;
  }

  body {
    line-height: 1.75;
    font-size: var(--step-0);
    padding-block: 2rem;
    padding-inline: 1.5rem;
    margin-block: 0;
    margin-inline: auto;
    font-family: DMMono, monospace;
    color: var(--text-color);
    background-color: var(--background-color);
  }

  :is(img, picture, video, iframe, svg) {
    max-width: 100%;
    display: block;
  }

  img {
    object-fit: cover;
  }

  button {
    color: currentcolor;
  }

  :is(h1, h2, h3, h4, h5, h6, dl, dt, blockquote) {
    line-height: 1.3;
  }

  :is(input, button, textarea, select) {
    font: inherit;
    border: none;
    background-color: transparent;
    cursor: pointer;
  }

  @media (prefers-reduced-motion) {
    html:focus-within {
      scroll-behavior: auto;
    }

    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

@layer default {
  :is(main, body, section) > * + * {
    margin-block-start: var(--flow-space, 2em);
  }

  :is(h1, h2, h3, blockquote) {
    --flow-space: 1em;
  }

  :is(h1, h2, h3) + * {
    --flow-space: 0.5em;
  }

  main {
    max-width: 65ch;
  }

  a {
    color: var(--primary-color);
    font-weight: 700;
    text-underline-offset: clamp(4px, 1vw, 8px);
  }

  a.active {
    color: var(--text-color);
    font-weight: 600;
  }

  svg {
    fill: var(--text-color);
    transition: scale var(--transition-speed-slow) var(--transition-timing);
    width: var(--step-4);
  }

  svg:hover {
    scale: 1.2;
    transition-duration: var(--transition-speed);
  }

  svg:active {
    scale: 0.9;
  }

  ul {
    list-style-position: inside;
  }

  :is(*:focus-visible, aside li:focus-within) {
    outline: 2px dashed var(--text-color);
    outline-offset: 0.25rem;
    border-radius: 3px;
    text-decoration: none;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
}

@layer component {
  .icon-list {
    display: flex;
    gap: clamp(1rem, 4vw, 2rem);
    list-style: none;
  }

  .icon-foreground {
    fill: var(--text-color);
  }

  .icon-background {
    fill: var(--background-color);
  }

  .light-icon {
    display: var(--display-light-icon);
  }

  .dark-icon {
    display: var(--display-dark-icon);
  }

  .theme-button {
    width: var(--step-2);
    fill: var(--text-color);
  }

  .nav {
    display: flex;
  }

  .emoji {
    height: 1em;
    width: 1em;
    display: inline-block;
    position: relative;
    top: 3px;
    filter: invert(var(--filter-invert));
  }

  .name {
    font-weight: 700;
    text-decoration: none;
    font-size: var(--step-2);
    background-image: var(--brand-gradient);
    background-clip: text;
    color: transparent;
    position: relative;
    line-height: 2.5;
  }

  .name:not(:focus)::after {
    content: "";
    position: absolute;
    bottom: -0.5rem;
    left: 0;
    width: 100%;
    border-style: solid;
    border-image: var(--brand-gradient);
    border-image-slice: 100%;
    border-image-slice: 1;
    scale: 0;
    transform-origin: bottom left;
    animation: underline 1s;
    animation-fill-mode: forwards;
    animation-delay: 1s;
  }
}

@layer utility {
  .line-through {
    text-decoration: line-through;
  }
}

@layer animation {
  @keyframes underline {
    to {
      scale: 1;
    }
  }
}
